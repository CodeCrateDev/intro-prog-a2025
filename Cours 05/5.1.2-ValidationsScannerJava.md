# Notes de cours - Validations avec `Scanner` en Java

## 1. Rappel du `Scanner`

La classe `Scanner` (du package `java.util`) permet de **lire des
données saisies par l'utilisateur au clavier**.

### Exemple simple

``` java
import java.util.Scanner;

public class Exemple {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.print("Entrez un nombre entier : ");
        int nombre = sc.nextInt();

        System.out.println("Vous avez entré : " + nombre);
    }
}
```

------------------------------------------------------------------------

## 2. Le problème des **validations**

Quand on demande une donnée à l'utilisateur, il peut se tromper : -
Entrer une **lettre** au lieu d'un nombre. - Entrer une valeur **hors
d'un intervalle** (ex : -5 alors qu'on attend un âge positif). - Entrer
une **chaîne vide**.

C'est pourquoi on doit **valider** les données avant de les utiliser.

------------------------------------------------------------------------

## 3. Validation de types avec `Scanner`

### Vérifier si l'utilisateur a bien entré un entier

``` java
System.out.print("Entrez un nombre entier : ");
if (sc.hasNextInt()) {
    int valeur = sc.nextInt();
    System.out.println("Entier valide : " + valeur);
} else {
    System.out.println("Erreur : vous devez entrer un nombre entier !");
}
```

Ici : - `hasNextInt()` vérifie si la prochaine saisie est bien un
entier. - Si ce n'est pas le cas, on affiche un message d'erreur.

------------------------------------------------------------------------

## 4. Validation de bornes (plage de valeurs)

Même si l'utilisateur entre un entier, il peut être **hors des bornes
attendues**.

Exemple : âge entre 0 et 120.

``` java
System.out.print("Entrez votre âge : ");
if (sc.hasNextInt()) {
    int age = sc.nextInt();

    if (age >= 0 && age <= 120) {
        System.out.println("Âge valide : " + age);
    } else {
        System.out.println("Erreur : l'âge doit être entre 0 et 120.");
    }
} else {
    System.out.println("Erreur : vous devez entrer un entier !");
}
```

------------------------------------------------------------------------

## 5. Validation de chaînes de caractères

Parfois, on veut que l'utilisateur entre du texte non vide.

``` java
System.out.print("Entrez votre nom : ");
String nom = sc.nextLine();

if (nom.isEmpty()) {
    System.out.println("Erreur : le nom ne peut pas être vide !");
} else {
    System.out.println("Bonjour, " + nom + " !");
}
```

------------------------------------------------------------------------

## 6. Validation sur une liste de choix

On peut aussi limiter les réponses possibles (exemple : OUI ou NON).

``` java
System.out.print("Voulez-vous continuer ? (oui/non) : ");
String reponse = sc.nextLine();

if (reponse.equalsIgnoreCase("oui")) {
    System.out.println("Vous avez choisi de continuer.");
} else if (reponse.equalsIgnoreCase("non")) {
    System.out.println("Vous avez choisi d'arrêter.");
} else {
    System.out.println("Erreur : vous devez répondre par 'oui' ou 'non'.");
}
```

## 7. Exemple complet de validations avec bretelles
### Demander un entier et vérifier sa valeur.
``` java
        // Demander un entier et vérifier sa valeur.
        // Si la saisie est valide (un entier) afficher la valeur seulement si elle est entre 0 et 100 inclusivement
        // Si la saisie est invalide afficher un message d'erreur approprié.
        System.out.printf("Entrer un entier entre %d et %d : ", LIMITE_INF, LIMITE_SUP);
        if( saisie.hasNextInt() ) {  // on teste si le prochain jeton est un entier. Ici, le tampon est vide, alors la méthode hasNextInt() va attendre une saisie
            entier = saisie.nextInt();
            // Vérifions si l'entier est à l'intérieur de [0, 100]
            if( LIMITE_INF <= entier && entier <= LIMITE_SUP ) {
                System.out.printf("Bravo le nombre %d est valide!\n", entier);
            }
            else {
                System.out.printf("L'entier doit être dans l'intervalle [%d, %d]!!\n", LIMITE_INF, LIMITE_SUP);
            }
        }
        else {  // le scanner est incapable d'extraire un entier
            System.err.println("La saisie de l'entier est invalide.");
        }
        saisie.nextLine(); // VIDER LE TAMPON!
```
### Demander un réel et vérifier sa valeur
``` java
        // Demander un réel et vérifier sa valeur.
        // Si la saisie est valide (un réel) afficher son inverse multiplicatif seulement si le nombre est différent de 0
        // Si la saisie est invalide afficher un message d'erreur approprié.
        System.out.printf("Entrer un nombre quelconque : ");
        if( saisie.hasNextDouble() ) { 
            reel = saisie.nextDouble();
            // Vérifions si le nombre est différent de 0
            if( reel != 0 ) {
                System.out.printf("Bravo le nombre %f est valide! Son inverse est %f\n", reel, 1/reel);
            }
            else {
                System.out.printf("Impossible de déterminer l'inverse du nombre.");
            }
        }
        else {  // le scanner est incapable d'extraire un entier
            System.err.println("La saisie du nombre est invalide.");
        }
        saisie.nextLine(); // VIDER LE TAMPON!

```
### Demander un mot et s'il est non vide, afficher sa dernière lettre
``` java
        // Demander un mot et s'il est non vide, afficher sa dernière lettre
        // S'il est vide, afficher un message d'erreur approprié. [IMPOSSIBLE]
        System.out.print("Entrer un mot SVP : ");
        if( saisie.hasNext() ) { // hasNext() impose la saisie d'AU MOINS un caractère visible, donc ne sera jamais vide
            mot = saisie.next();
            System.out.printf("La taille de ce mot est %d.\n", mot.length());
        }
        saisie.nextLine(); // FTB! Bonne pratique à avoir
```



------------------------------------------------------------------------

## 8. Limite sans `while`

Pour l'instant, avec seulement des **`if`**, on ne peut **pas redemander automatiquement** une valeur en cas d'erreur.\
On peut seulement afficher un **message d'erreur** et arrêter le programme.

Quand on verra les **boucles (`while`)**, on pourra redemander jusqu'à obtenir une valeur valide.

------------------------------------------------------------------------

## À retenir

1. `Scanner` permet de lire des **nombres** (`nextInt()`, `nextDouble()`, etc.) et du **texte** (`nextLine()`).
2. Pour valider :
    - Utiliser `hasNextInt()`, `hasNextDouble()` pour vérifier le type.
    - Utiliser des `if` pour vérifier des **plages de valeurs** ou des **règles**.
    - Comparer les chaînes (`equalsIgnoreCase`) pour limiter les choix.
3. Sans boucle, on peut seulement afficher une **erreur** et arrêter le
    programme.

------------------------------------------------------------------------

## Tableau synthèse des validations avec `Scanner`

| Type de validation                      | Méthode utilisée                          | Exemple de code                        | Message d’erreur possible                                        |
| --------------------------------------- | ----------------------------------------- | -------------------------------------- | ---------------------------------------------------------------- |
| Validation d’un entier                  | `hasNextInt()`                            | `if (sc.hasNextInt()) { ... }`         | "Erreur : vous devez entrer un nombre entier !"                  |
| Validation d’un réel                    | `hasNextDouble()`                         | `if (sc.hasNextDouble()) { ... }`      | "Erreur : vous devez entrer un nombre décimal !"                 |
| Validation d’une plage                  | `if (valeur >= min && valeur <= max)`     | `if (age >= 0 && age <= 120)`          | "Erreur : valeur hors limites !"                                 |
| Validation de texte vide                | `isEmpty()`                               | `if (nom.isEmpty())`                   | "Erreur : le texte ne peut pas être vide !"                      |
| Validation sur un choix                 | `equalsIgnoreCase()`                      | `if (rep.equalsIgnoreCase("oui")) ...` | "Erreur : vous devez répondre par 'oui' ou 'non'."               |
| Validation d’un nombre positif          | `if (valeur > 0)`                         | `if (salaire > 0)`                     | "Erreur : la valeur doit être positive !"                        |
| Validation d’un nombre pair             | `if (valeur % 2 == 0)`                    | `if (nombre % 2 == 0)`                 | "Erreur : le nombre doit être pair !"                            |
| Validation d’un nombre impair           | `if (valeur % 2 != 0)`                    | `if (nombre % 2 != 0)`                 | "Erreur : le nombre doit être impair !"                          |
| Validation d’un mot de passe long       | `if (motDePasse.length() >= 8)`           | `if (mdp.length() >= 8)`               | "Erreur : le mot de passe doit contenir au moins 8 caractères !" |
| Validation d’un email simple            | `contains("@") && contains(".")`          | `if (email.contains("@"))`             | "Erreur : email invalide !"                                      |
| Validation d’une note scolaire          | `if (note >= 0 && note <= 100)`           | `if (note >= 0 && note <= 100)`        | "Erreur : la note doit être entre 0 et 100."                     |
| Validation d’un code postal (ex simple) | `length == 6`                             | `if (cp.length() == 6)`                | "Erreur : le code postal doit avoir 6 caractères !"              |
| Validation d’un seul caractère          | `if (chaine.length() == 1)`               | `if (lettre.length() == 1)`            | "Erreur : vous devez entrer un seul caractère !"                 |
| Validation d’une majuscule              | `Character.isUpperCase(lettre.charAt(0))` | `if (Character.isUpperCase(c))`        | "Erreur : la lettre doit être en majuscule !"                    |
| Validation d’une minuscule              | `Character.isLowerCase(lettre.charAt(0))` | `if (Character.isLowerCase(c))`        | "Erreur : la lettre doit être en minuscule !"                    |
